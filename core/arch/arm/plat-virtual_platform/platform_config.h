// SPDX-License-Identifier: BSD-2-Clause
/*
 * Copyright (C) 2020 VeriSilicon Holdings Co., Ltd.
 */

#ifndef PLATFORM_CONFIG_H
#define PLATFORM_CONFIG_H

#include <mm/generic_ram_layout.h>

/* Make stacks aligned to data cache line length */
#define STACK_ALIGNMENT		64

#ifdef ARM64
#ifdef CFG_WITH_PAGER
#error "Pager not supported for ARM64"
#endif
#endif /* ARM64 */

#ifdef PLATFORM_FLAVOR_a55
#define PLAT_A55_NIC_CLK		12500000
#endif

/* CRM */
#define PLAT_A55_CRM_BASE			0xe200000
#define PLAT_A55_CRM_SIZE			0x10000
#define PLAT_A55_ESEUCRE_CLK_BASE    (PLAT_A55_CRM_BASE + 0x11f0)

/* 16550 UART */
#ifdef PLATFORM_FLAVOR_a55
#define UART0_BASE			0x0a100000
#endif

#define PLAT_A55_BOOT_UART_BASE	UART0_BASE
#define PLAT_A55_BOOT_UART_SIZE	0x1000
#define PLAT_A55_CONSOLE_BAUDRATE	115200
#define PLAT_A55_BOOT_UART_SRC_CLK   PLAT_A55_NIC_CLK

#ifdef PLATFORM_FLAVOR_a55
#define GIC_BASE                        0x0c000000
#endif
#define GIC_SIZE                        0x00020000
#define GICD_OFFSET                     0
#define GICC_OFFSET                     0x00010000

/* SYS_SMMU SID CFG */
#define SYS_SMMU_VEC_SID			0x0
#define SYS_SMMU_VECJ_SID			0x1
#define SYS_SMMU_VDC_SID			0x2
#define SYS_SMMU_VIP_SID			0x3
#define SYS_SMMU_USB3_SID			0x4

/* CSI_SMMU SID CFG */
#define CSI_SMMU_AUDIO_SID			0x0
#define CSI_SMMU_ISPI_SID			0x1
#define CSI_SMMU_ISPV_SID			0x2
#define CSI_SMMU_ISPV_SIF_SID			0x3

/* DSS_SMMU GROUPS SID CFG */
#define DSS_SMMU_DC8000I_SID			0x0
#define DSS_SMMU_DC8000E_SID			0x1
#define DSS_SMMU_GC620I_SID			0x2
#define DSS_SMMU_GC620E_SID			0x3
#define DSS_SMMU_HDCP_SID			0x4

#define FECTL_VALUE				0x2
#define FECFG_VALUE				0x0
#define FECTL_VALUE_MASK			0x02
#define FECFG_VALUE_MASK			0xFF
#define SID_VALUE_MASK				0xFF
#define TID_VALUE_MASK				0xFFFFF

#define FECTL_REG_OFFSET			0x28
#define FECFG_REG_OFFSET			0x2c

/* ML CFG */
#define VIP_CONFIG_BASE    	        0x0ab00000
#define VIP_CONFIG_SIZE    	        0x00100000
#define VIP_AXIFE_OFFSET		0x00010000
#define VIP_FECTL_REG_OFFSET		(VIP_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define VIP_SYS_CSR_OFFSET		0x00020000
#define VIP_AR_SID_CFG			(VIP_SYS_CSR_OFFSET + 0x18)
#define VIP_AW_SID_CFG			(VIP_SYS_CSR_OFFSET + 0x1c)
#define VIP_SYS_USER_CFG		(VIP_SYS_CSR_OFFSET + 0x08)

/* VEC CFG */
#define VEC_CONFIG_BASE    	        0x08100000
#define VEC_CONFIG_SIZE    	        0x00030000
#define VEC_AXIFE_OFFSET		0x00002000
#define VEC_FECTL_REG_OFFSET		(VEC_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define VEC_FECFG_REG_OFFSET		(VEC_AXIFE_OFFSET + FECFG_REG_OFFSET)
#define VEC_SYS_CSR_OFFSET		0x00020000
#define VEC_AR_SID_CFG			(VEC_SYS_CSR_OFFSET + 0x0c)
#define VEC_AW_SID_CFG			(VEC_SYS_CSR_OFFSET + 0x10)

#define VECJ_CONFIG_BASE		0x08110000
#define VECJ_AXIFE_OFFSET		0x00002000
#define VECJ_FECTL_REG_OFFSET		(VECJ_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define VECJ_FECFG_REG_OFFSET		(VECJ_AXIFE_OFFSET + FECFG_REG_OFFSET)
#define VECJ_AR_SID_CFG			(VEC_SYS_CSR_OFFSET + 0x1c)
#define VECJ_AW_SID_CFG			(VEC_SYS_CSR_OFFSET + 0x20)

#define VEC_TBU1_REG6			(VEC_SYS_CSR_OFFSET + 0x28)
#define VECJ_TBU2_REG6			(VEC_SYS_CSR_OFFSET + 0x30)

/* VDC CFG */
#define VDC_CONFIG_BASE    	        0x08000000
#define VDC_CONFIG_SIZE    	        0x00020000
#define VDC_AXIFE_OFFSET		0x0000c000
#define VDC_FECTL_REG_OFFSET		(VDC_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define VDC_FECFG_REG_OFFSET		(VDC_AXIFE_OFFSET + FECFG_REG_OFFSET)
#define VDC_SYS_CSR_OFFSET		0x00010000
#define VDC_AR_SID_CFG			(VDC_SYS_CSR_OFFSET + 0x0c)
#define VDC_AW_SID_CFG			(VDC_SYS_CSR_OFFSET + 0x10)

#define VDC_TBU1_REG6			(VDC_SYS_CSR_OFFSET + 0x18)

/* ISP VIDEO CFG */
#define ISPV_AXIFE_CONFIG_BASE    	0x08870000
#define ISPV_AXIFE_CONFIG_SIZE    	0x00010000
#define ISPV_AXIFE_OFFSET		0x0
#define ISPV_FECTL_REG_OFFSET		(ISPV_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define ISPV_AR_SID_TBU2		0x2d0
#define ISPV_AW_SID_TBU2		0x2d4
#define ISPV_SIF_AR_SID_TBU3		0x310
#define ISPV_SIF_AW_SID_TBU3		0x314

/* ISP IMAGE CFG */
#define ISPI_AXIFE_CONFIG_BASE    	0x08a70000
#define ISPI_AXIFE_CONFIG_SIZE    	0x00010000
#define ISPI_AXIFE_OFFSET		0x0
#define ISPI_FECTL_REG_OFFSET		(ISPI_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define ISPI_AR_SID_TBU1		0x290
#define ISPI_AW_SID_TBU1		0x294

/* Display CFG */
#define DSS_CONFIG_BASE    		0x09000000
#define DSS_CONFIG_SIZE    		0x000d0000
#define MDP_GC620_AXIFE_OFFSET		0x00040000
#define SDP_GC620_AXIFE_OFFSET		0x00060000
#define MDP_DC8000_AXIFE_OFFSET	0x000a0000
#define SDP_DC8000_AXIFE_OFFSET	0x000c0000
#define MDP_GC620_FECTL_REG_OFFSET	(MDP_GC620_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define SDP_GC620_FECTL_REG_OFFSET	(SDP_GC620_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define MDP_DC8000_FECTL_REG_OFFSET	(MDP_DC8000_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define SDP_DC8000_FECTL_REG_OFFSET	(SDP_DC8000_AXIFE_OFFSET + FECTL_REG_OFFSET)
#define DSS_HDCP1_CTRL0_OFFSET		0x7c
#define DSS_HDCP1_CTRL0_MASK		0x1
#define DSS_HDCP1_CTRL0_VALUE		0x1

#define DSS_CFG_MMU0_TBU0_REG2		0x0000030c
#define DSS_CFG_MMU0_TBU0_REG3		0x00000310
#define DSS_CFG_MMU0_TBU1_REG2		0x00000324
#define DSS_CFG_MMU0_TBU1_REG3		0x00000328
#define DSS_CFG_MMU0_TBU2_REG2		0x0000033c
#define DSS_CFG_MMU0_TBU2_REG3		0x00000340
#define DSS_CFG_MMU0_TBU3_REG2		0x00000354
#define DSS_CFG_MMU0_TBU3_REG3		0x00000358
#define DSS_CFG_MMU0_TBU4_REG2		0x00000404
#define DSS_CFG_MMU0_TBU4_REG3		0x00000408
#define DSS_CFG_MMU1_TBU_REG2		0x0000036c
#define DSS_CFG_MMU1_TBU_REG3		0x00000370

/* Peripheral CFG */
#define PERI_SYS_CONFIG_BASE    	0x0a230000
#define PERI_SYS_CONFIG_SIZE    	0x00010000

/* AUDIO CFG */
#define AUDIO_AR_SID_TBU0		0x00000250
#define AUDIO_AW_SID_TBU0		0x00000254

/* GPU CFG */
#define GPU_SYS_CSR_BASE		0x0a650000
#define GPU_SYS_CSR_SIZE		0x00010000

#define USER_OVERRIDE_S0		0x00000008
#define USER_CFG_S0_0			0x0000000c
#define USER_CFG_S0_1			0x00000010
#define USER_OVERRIDE_S1		0x00000034
#define USER_CFG_S1_0			0x00000038
#define USER_CFG_S1_1			0x0000003c
#define USER_OVERRIDE_S2		0x00000060
#define USER_CFG_S2_0			0x00000064
#define USER_CFG_S2_1			0x00000068
#define USER_OVERRIDE_S3		0x0000008c
#define USER_CFG_S3_0			0x00000090
#define USER_CFG_S3_1			0x00000094
#define USER_CFG_TCU			0x000000b8

#define USER_OVERRIDE_MASK		0xFF
#define USER_CFG_MASK			0x1FF
#define USER_OVERRIDE_VALUE		0x3
#define USER_CFG_VALUE			0x101

#define APB_FILTER_ENABLE			1
#define APB_FILTER_R_SEL			0
#define APB_FILTER_W_SEL			1

#define APB_FILTER_RW_ENABLE			\
					((APB_FILTER_ENABLE<<APB_FILTER_R_SEL)\
					|(APB_FILTER_ENABLE<<APB_FILTER_W_SEL))

#endif /* PLATFORM_CONFIG_H */
